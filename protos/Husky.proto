#VRML_SIM R2025a utf8
# License:
# Documentation

EXTERNPROTO "./Astra.proto"

PROTO Husky [
    field SFVec3f       translation     0 0 0
    field SFRotation    rotation        0 0 1 0
    field SFString      name            "husky"
    field SFString      controller      "<extern>"
    field  MFNode      cameraSlot      [ Astra { name "camera" } ] # Extends the robot with an Astra RGBD camera.
]

{
    Robot {
        translation IS translation
        rotation IS rotation
        name IS name
        model "ROBOLAB husky"
        controller IS controller
        children [
            # --- obj robot body 
            CadShape { url "../meshes/husky.obj" }
            Group {
                children [
                    Camera {
                        translation -0.18 0 1.34
                        rotation 0 0 1 -1.5707953071795862
                        name "camera_360_2"
                        fieldOfView 3.14
                        width 960
                        height 960
                        projection "cylindrical"
                        }
                    Camera {
                        translation -0.18 0 1.34
                        rotation 0 0 -1 -1.5708053071795867
                        name "camera_360_1"
                        fieldOfView 3.14
                        width 960
                        height 960
                        projection "cylindrical"
                        }
                    ]
                }
            DEF CAMERA_SLOT Pose {
                translation -0.027 0.35 0.165
                rotation 0 -0.75 -1 2.7
                children IS cameraSlot
            }
            # Lidar 1
            Lidar {
                translation -0.17 0 1.13
                rotation 0 0 1 0.34
                name "helios"
                tiltAngle -0.34
                horizontalResolution 900
                fieldOfView 6.28
                verticalFieldOfView 3.141592653589793
                numberOfLayers 82
                maxRange 20
                noise 0.005
                defaultFrequency 20
            }
            Lidar {
                translation 0.1 -2.65355e-08 0.54
                rotation 1 0 0 3.14159
                children [
                    Shape {
                        appearance DEF BlackMetalAppearance PBRAppearance {
                            baseColor 0 0 0
                            roughness 0.5
                            name "BlackMetal"
                        }
                        geometry Cylinder {
                            height 0.01
                            radius 0.05
                        }
                    }
                ]
                name "bpearl"
                horizontalResolution 875
                fieldOfView 6.28
                verticalFieldOfView 3.141592653589793
                numberOfLayers 64
                maxRange 20
                noise 0.005
                defaultFrequency 20
            }
        ]
    }
}